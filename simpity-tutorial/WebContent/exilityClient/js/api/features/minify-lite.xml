<?xml version="1.0" encoding="UTF-8"?>
<project name="exilityClient" default="minify" basedir="d:/b/ez/webapp/exilityClient/js/api">
	<property name="api" value="exilite.js" />
	<property name="miniApi" value="exilite.min.js" />
	<property name="jar.dir" value="d:/jars" />
	<property name="jscompjar" location="${jar.dir}/google-closure-compiler.jar" />
	 <taskdef name="jscomp" 
	 		  classname="com.google.javascript.jscomp.ant.CompileTask"
	 		  classpath="${jscompjar}"
           />
	
	<target name="minify" >
	    <description>Create a single api.js file and a minified file </description>
	    <echo>Concatenating javascript...</echo>
	    <concat destfile="${basedir}/${api}">
	    
	    	<filelist dir="${basedir}/features">
	            <file name="version.js" />
	            <file name="backgroundJobs.js" />
	            <file name="exilityParameters.js" />
	            <file name="clientConstants.js" />
	            <file name="pageManager.js" />
	            <file name="utils.js" />
	            <file name="dataCollection.js" />
	            <file name="formatter.js" />
	            <file name="messages.js" />
	            <file name="serverAgent.js" />
	            <file name="field.js" />
	 <!--       	
	            <file name="fieldSelection.js" />
	            <file name="fieldAssisted.js" />
	            <file name="fieldChart.js" />
	            <file name="fieldExotic.js" />
	            <file name="fieldXml.js" />
	 -->
	            <file name="action.js" />
	<!--
	            <file name="actionExtended.js" />
	-->
	            <file name="table.js" />
	<!--
	            <file name="tableButton.js" />
	            <file name="tableDisplay.js" />
	            <file name="tableGrid.js" />
	            <file name="tableQuickSearch.js" />
	            <file name="tableRepeatingDisplay.js" />
	            <file name="tableSortFilter.js" />
	            <file name="tableAggregateAndRepeat.js" />
	            <file name="tableTreeView.js" />
	-->
	        	<file name="page.js" />
   <!--
	        	<file name="pageSlider.js" />
   -->
	            <file name="validation.js" />
	<!--
	            <file name="animator.js" />
	            <file name="eMenu.js" />
	 -->
	        	<!-- one of highChartDriver.js or flotrDriver.js is to be included for a project that uses that charting library -->
	        </filelist>
	    </concat>
	 
	    <echo>Concatenating using the Closure Compiler...</echo>
	    <jscomp compilationLevel="simple" 
	    		warning="quiet" 
	    		debug="false" 
	    		output="${basedir}/${miniApi}">
	        <sources dir="${basedir}">
	            <file name="${api}" />
	        </sources>
	    </jscomp>
	    <echo>Finished</echo>
	
	</target>
</project>